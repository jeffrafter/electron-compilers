'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _compilerBase = require('../compiler-base');

const inputMimeTypes = ['text/graphql'];
let gql = null;

class GraphQLCompiler extends _compilerBase.SimpleCompilerBase {
  constructor() {
    super();
  }

  static getInputMimeTypes() {
    return inputMimeTypes;
  }

  compileSync(sourceCode) {
    gql = gql || require('graphql-tag/loader');
    // This is a stub, original loader calls webpack-specific this.cacheable()
    const webpackLoaderStub = {
      cacheable: () => {}
    };
    const loader = gql.bind(webpackLoaderStub);

    const js = loader(sourceCode);

    return {
      code: js,
      mimeType: 'application/javascript'
    };
  }

  getCompilerVersion() {
    return require('graphql-tag/package.json').version;
  }
}
exports.default = GraphQLCompiler;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9qcy9ncmFwaHFsLmpzIl0sIm5hbWVzIjpbImlucHV0TWltZVR5cGVzIiwiZ3FsIiwiR3JhcGhRTENvbXBpbGVyIiwiU2ltcGxlQ29tcGlsZXJCYXNlIiwiY29uc3RydWN0b3IiLCJnZXRJbnB1dE1pbWVUeXBlcyIsImNvbXBpbGVTeW5jIiwic291cmNlQ29kZSIsInJlcXVpcmUiLCJ3ZWJwYWNrTG9hZGVyU3R1YiIsImNhY2hlYWJsZSIsImxvYWRlciIsImJpbmQiLCJqcyIsImNvZGUiLCJtaW1lVHlwZSIsImdldENvbXBpbGVyVmVyc2lvbiIsInZlcnNpb24iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOztBQUVBLE1BQU1BLGlCQUFpQixDQUFDLGNBQUQsQ0FBdkI7QUFDQSxJQUFJQyxNQUFNLElBQVY7O0FBRWUsTUFBTUMsZUFBTixTQUE4QkMsZ0NBQTlCLENBQWlEO0FBQzlEQyxnQkFBYztBQUNaO0FBQ0Q7O0FBRUQsU0FBT0MsaUJBQVAsR0FBMkI7QUFDekIsV0FBT0wsY0FBUDtBQUNEOztBQUVETSxjQUFZQyxVQUFaLEVBQXdCO0FBQ3RCTixVQUFNQSxPQUFPTyxRQUFRLG9CQUFSLENBQWI7QUFDQTtBQUNBLFVBQU1DLG9CQUFvQjtBQUN4QkMsaUJBQVcsTUFBTSxDQUFFO0FBREssS0FBMUI7QUFHQSxVQUFNQyxTQUFTVixJQUFJVyxJQUFKLENBQVNILGlCQUFULENBQWY7O0FBRUEsVUFBTUksS0FBS0YsT0FBT0osVUFBUCxDQUFYOztBQUVBLFdBQU87QUFDTE8sWUFBTUQsRUFERDtBQUVMRSxnQkFBVTtBQUZMLEtBQVA7QUFJRDs7QUFFREMsdUJBQXFCO0FBQ25CLFdBQU9SLFFBQVEsMEJBQVIsRUFBb0NTLE9BQTNDO0FBQ0Q7QUEzQjZEO2tCQUEzQ2YsZSIsImZpbGUiOiJncmFwaHFsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtTaW1wbGVDb21waWxlckJhc2V9IGZyb20gJy4uL2NvbXBpbGVyLWJhc2UnO1xuXG5jb25zdCBpbnB1dE1pbWVUeXBlcyA9IFsndGV4dC9ncmFwaHFsJ107XG5sZXQgZ3FsID0gbnVsbDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR3JhcGhRTENvbXBpbGVyIGV4dGVuZHMgU2ltcGxlQ29tcGlsZXJCYXNlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHN0YXRpYyBnZXRJbnB1dE1pbWVUeXBlcygpIHtcbiAgICByZXR1cm4gaW5wdXRNaW1lVHlwZXM7XG4gIH1cblxuICBjb21waWxlU3luYyhzb3VyY2VDb2RlKSB7XG4gICAgZ3FsID0gZ3FsIHx8IHJlcXVpcmUoJ2dyYXBocWwtdGFnL2xvYWRlcicpO1xuICAgIC8vIFRoaXMgaXMgYSBzdHViLCBvcmlnaW5hbCBsb2FkZXIgY2FsbHMgd2VicGFjay1zcGVjaWZpYyB0aGlzLmNhY2hlYWJsZSgpXG4gICAgY29uc3Qgd2VicGFja0xvYWRlclN0dWIgPSB7XG4gICAgICBjYWNoZWFibGU6ICgpID0+IHt9XG4gICAgfTtcbiAgICBjb25zdCBsb2FkZXIgPSBncWwuYmluZCh3ZWJwYWNrTG9hZGVyU3R1Yik7XG5cbiAgICBjb25zdCBqcyA9IGxvYWRlcihzb3VyY2VDb2RlKTtcblxuICAgIHJldHVybiB7XG4gICAgICBjb2RlOiBqcyxcbiAgICAgIG1pbWVUeXBlOiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCdcbiAgICB9O1xuICB9XG5cbiAgZ2V0Q29tcGlsZXJWZXJzaW9uKCkge1xuICAgIHJldHVybiByZXF1aXJlKCdncmFwaHFsLXRhZy9wYWNrYWdlLmpzb24nKS52ZXJzaW9uO1xuICB9XG59XG4iXX0=